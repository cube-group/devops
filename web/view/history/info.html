{{define "history/info.html"}}
    {{template "layout/top.html" .}}
    <div class="panel">
        <div class="panel-heading">
            <div class="panel-title">
                <a href="/history">< 返回 | </a>项目 ${info.project.name} 部署日志 时间${info.createdAt} ID: ${info.id}
            </div>
        </div>
        <div class="panel-body">
            <!-- log Layer -->
            <div id="log-container" onkeydown="return false;" onmousedown="return false;"
                 style="width:100%;height:100%;background-color:#0C0C0C;padding: 10px">
                <iframe id="log" style="width: 100%;height:100%;border: medium none;"></iframe>
            </div>
        </div>
    </div>
    <script>
        vueMixin = {
            data: {
                info:{{.history}},
            },
            methods: {
                onResize() {
                    var frame = $('#log');
                    var height = $(window).height() - frame.offset().top - 50;
                    frame.css('height', height + 'px');
                }
            },
            mounted() {
                reqPost(`/tty/create?code=tail&id=${this.info.id}`, null, (resData) => {
                    var frameURL = baseURL('/tty/port', resData.port, '/connect');
                    $('#log').attr('src', frameURL);
                    this.onResize();
                    $(window).bind('resize', this.onResize);
                });
            }
        }
    </script>

    {{template "layout/footer.html" . }}
{{end}}